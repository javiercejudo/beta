<!DOCTYPE html><html lang="en-AU" data-theme="jc-dark"><head><meta charset="utf-8"><title>Microdata for Rich Snippets - javiercejudo.com</title><meta name="description" content="Wrap semantic blocks, use HTML classes for styling and read the manual."><meta name="viewport" content="width=device-width, initial-scale=1"><base href="../../"><link rel="stylesheet" type="text/css" href="common.85ebaa26.css"><script src="theme.76985ab3.js"></script><script src="common.2a91918d.js" defer=""></script><link rel="prefetch" href="highlight-js.d869324f.css" as="style"><link type="application/atom+xml" rel="alternate" href="https://capable-meerkat-0336ed.netlify.app/blog/feed.xml" title="Tech notes by Javier Cejudo"><link rel="stylesheet" type="text/css" href="highlight-js.d869324f.css"></head><body class="standard-page"> <a href="blog/microdata-for-rich-snippets/#skip-nav" class="skip-nav">Skip to content</a> <div class="page"> <header> <div class="container"> <nav> <ul> <li> <a href="./" class="nav-home"> Home </a> </li> </ul> <a class="logo-link" href="./" title="Home"> <div class="logo"> <span class="logo-j"></span> <span class="logo-j2"></span> <span class="logo-c"></span> </div> </a> <ul> <li> <a href="menu/" class="nav-menu"> Menu </a> </li> </ul> </nav> </div> </header> <div class="content" id="skip-nav"><div class="container narrow"> <p> <a href="blog/">Tech notes by Javier Cejudo</a> </p> <h1>Microdata for Rich Snippets</h1> <p>TLDR: Wrap semantic blocks, use HTML classes for styling and read the manual.</p> <h2>The concept</h2> <blockquote> <p>Microdata annotates the DOM with scoped name/value pairs from custom vocabularies.</p> </blockquote> <p>The vocabulary we are using is <a href="http://schema.org/">Schema.org</a>, which is recognized by Google, Bing and Yahoo! among others.</p> <h2>The goal</h2> <p>Help search engines understand the content of a page in a semantic way.</p> <h2>Basic example</h2> <p>Pay special attention to the attributes <code>itemscope</code>, <code>itemtype</code> and <code>itemprop</code>, and to the <code>meta</code> tags:</p> <pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">itemscope</span> <span class="hljs-attr">itemtype</span>=<span class="hljs-string">&quot;http://schema.org/Product&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;sku&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;123-sku&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>
    Product title
  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;brand-name&quot;</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;brand&quot;</span> <span class="hljs-attr">itemscope</span>
        <span class="hljs-attr">itemtype</span>=<span class="hljs-string">&quot;http://schema.org/Brand&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/brand-1&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>Brand name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;star-wrap&quot;</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;aggregateRating&quot;</span> <span class="hljs-attr">itemscope</span>
        <span class="hljs-attr">itemtype</span>=<span class="hljs-string">&quot;http://schema.org/AggregateRating&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;bestRating&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;5&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;ratingValue&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span>  <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa-icon-star&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa-icon-star&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa-icon-star&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa-icon-star&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa-icon-star stop&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
      (<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;rating-num stop&quot;</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;reviewCount&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>)
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  ...
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre> <p>The previous syntax describes a structure like the following:</p> <ul> <li><strong>Product</strong> [creates a new scope] <ul> <li><em>Sku:</em> 123-sku</li> <li><em>Name:</em> Product name</li> <li><strong>Brand</strong> [creates a new scope] <ul> <li><em>URL:</em> /brand-1</li> <li><em>Name:</em> Brand name</li> </ul> </li> <li><strong>Aggregate rating</strong> [creates a new scope] <ul> <li><em>Best rating:</em> 5</li> <li><em>Rating value:</em> 4</li> <li><em>Review count:</em> 2</li> </ul> </li> <li>...</li> </ul> </li> </ul> <p>All that information is extracted by search engines and they can use it to improve their results.</p> <h2>Things to consider when annotating data</h2> <p>While implementing the rich snippets, one challenge we might come across is that the data we want to annotate is either not in the DOM or it is not readily available to be annotated. In other cases, even if the information is readily available, the vocabulary requires it to be specified in a certain way. Have a look at the following cases:</p> <pre class="hljs"><code><span class="hljs-comment">&lt;!-- 1. The data is not in the DOM! --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;sku&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;123-sku&quot;</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 2. The data cannot be annotated as is! --&gt;</span>

<span class="hljs-comment">&lt;!--
The rating of a particular product is represented in the DOM
by stars that cannot be annotated.
We need to markup the actual value (★★★★☆ → 4):
--&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;bestRating&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;5&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;ratingValue&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span>

<span class="hljs-comment">&lt;!--
The date of a review is displayed but it is not
machine friendly (09/07/2013 → 2013-07-09):
--&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;datePublished&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;2013-07-09&quot;</span>&gt;</span>09/07/2013<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 3. The data needs to be specified in a certain way! --&gt;</span>

<span class="hljs-comment">&lt;!--
Stock availability is shown in the DOM as &#x27;In Stock&#x27;,
but the vocabulary needs it to be specified as follows
--&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">&quot;availability&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://schema.org/InStock&quot;</span> /&gt;</span>
</code></pre> <p>The documentation is clear about which properties need to be declared as above and the options available.</p> <h2>Things to consider when writing new HTML, applying CSS styles or simply moving things around</h2> <h3>Wrap semantic blocks</h3> <p>To make it easy for new HTML to be annotated, it is good practice to wrap any piece of information into its own element. A problem that we had when annotating the product page was that the only common parent of the product information and its reviews was the <code>body</code>, so we needed to wrap all the information in the product page into its own <code>div</code>, which of course created a huge diff in Git. The same applies to small pieces of information: if you need to display the brand of a product and the product name, wrap each one into its own element:</p> <pre class="hljs"><code><span class="hljs-comment">&lt;!--Suboptimal  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;product-details&quot;</span>&gt;</span>
  Brand name - Product name
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-comment">&lt;!--Better  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;product-details&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Brand name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> - <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Product name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre> <h3>Apply CSS styles via HTML classes</h3> <p>Continuing with the example above, if we need to apply styling to the brand name, it is better to do it through classes as this way is more robust than applying styles through elements.</p> <h3>Moving things around</h3> <p>As the microdata lives within the HTML, changes in the markup of a page can easily break pre-existing annotations. To prevent that, if a block containing microdata needs to be refactored, make sure to use the <a href="http://www.google.com/webmasters/tools/richsnippets">Google Structured Data Testing Tool</a> to check that the microdata is still valid or needs to be rearranged as well (e.g. maybe a property that belongs to a particular scope has been moved out of that scope).</p> <h2>References</h2> <ul> <li><a href="http://schema.org/docs/gs.html">Getting started with schema.org</a></li> <li><a href="http://diveintohtml5.info/extensibility.html#what-is-microdata">Dive Into HTML5: What is microdata?</a></li> <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html#microdata">Living Standard - Microdata</a></li> <li><a href="http://www.google.com/webmasters/tools/richsnippets">Google Structured Data Testing Tool</a></li> </ul> <p> Prev: <a href="blog/thoughts-on-the-status-of-web-development/">Thoughts on the status of web development</a> </p> <p> Next: <a href="blog/css-limitations-on-ie/">CSS limitations on IE</a> </p> </div> </div> <footer> <p> <span class="edit-link"><a href="https://github.com/javiercejudo/javiercejudo.com/blob/next-simpler/src/layouts/main.mustache" rel="noopener noreferrer">Edit layout</a></span> <span class="edit-link"><a href="https://github.com/javiercejudo/javiercejudo.com/blob/next-simpler/src/pages/blog/posts-collection/template.mustache" rel="noopener noreferrer">Edit page</a></span> <span class="edit-link"><a href="https://github.com/javiercejudo/javiercejudo.com/blob/next-simpler/src/pages/blog/posts-collection/./posts/microdata-for-rich-snippets/index.md" rel="noopener noreferrer">Edit post content</a></span> <span class="edit-link"><a href="https://github.com/javiercejudo/javiercejudo.com/blob/next-simpler/src/pages/blog/posts-collection/./posts/microdata-for-rich-snippets/index.js" rel="noopener noreferrer">Edit post metadata</a></span> </p> <div class="jc-theme-switcher jc-theme-switcher-cloak"> <button>Switch theme</button> </div> <p>© javiercejudo.com 2013-2022</p> </footer> </div> </body></html>